# ArchLab3

- `alg | acc | harv | hw | instr | binary | stream | port | pstr | prob1 | 8bit`

### Язык программирования. Синтаксис

- `alg` -- синтаксис языка должен напоминать java/javascript/lua. Должен поддерживать математические выражения.
    - необходимо объяснить, как происходит отображение больших выражений на регистры и память;
    - необходимо продемонстрировать работу транслятора в случае, если количество регистров недостаточно для реализации
      алгоритма.

### Архитектура

- `acc` -- система команд должна быть выстроена вокруг аккумулятора.
    - Инструкции -- изменяют значение, хранимое в аккумуляторе.
    - Ввод-вывод осуществляется через аккумулятор.

### Архитектура организации памят

Тип памяти -- однопортовая.

- `harv` -- Гарвардская архитектура.

### Control Unit

- `hw` -- hardwired. Реализуется как часть модели.

### Точность модели

- `instr` -- процессор необходимо моделировать с точностью до каждой инструкции (наблюдается состояние после каждой
  инструкции).

### Представление машинного кода

- `binary` -- бинарное представление.
    - Требуются настоящие бинарные файлы, а не текстовые файлы с `0` и `1`.
    - Требуется отладочный вывод в текстовый файл вида:

        ```text
        <address> - <HEXCODE> - <mnemonica>
        20 - 03340301 - add #01 <- 34 + #03
        ```

### Ввод-вывод

#### `stream`

Ввод-вывод осуществляется как поток токенов. Есть в примере. Логика работы:

- при старте модели у вас есть буфер, в котором представлены все данные ввода (`['h', 'e', 'l', 'l', 'o']`);
- при обращении к вводу (выполнение инструкции) модель процессора получает "токен" (символ) информации;
- если данные в буфере кончились -- останавливайте моделирование;
- вывод данных реализуется аналогично, по выполнении команд в буфер вывода добавляется ещё один символ;
- по окончании моделирования показать все выведенные данные;
- логика работы с буфером реализуется в рамках модели на Python.

### Ввод-вывод ISA

Поддержка ввода-вывода с точки зрения системы команд.

- `port` -- port-mapped (специальные инструкции для ввода-вывода)
    - адресация портов ввода-вывода должна присутствовать.

### Поддержка строк

Варианты:

- `pstr` -- Length-prefixed (Pascal string)

Общие требования:

- Статические строки должны храниться в памяти данных.
- Один символ может храниться в одном машинном слове (несмотря на явную неэффективность).

### Алгоритм

- Входные данные должны подаваться через ввод.
- Результат должен быть подан на вывод.
- Формат ввода/вывода данных -- на ваше усмотрение.

### Усложнение

- `8bit` -- машинное слово -- 8 бит (как для памяти команд, так и для памяти данных, если они разделены).

### Алгоритм

- Входные данные должны подаваться через ввод.
- Результат должен быть подан на вывод.
- Формат ввода/вывода данных -- на ваше усмотрение.

#### prob1. Multiples of 3 or 5

[Project Euler. Problem 1](https://projecteuler.net/problem=1)

If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9. The sum of these
multiples is 23.

Find the sum of all the multiples of 3 or 5 below 1000.
